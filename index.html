<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional Ruqyah App</title>

<style>
body{
  margin:0;
  font-family:Segoe UI;
  background:linear-gradient(135deg,#0d3b2e,#145c43);
  color:white;
  text-align:center;
}
header{
  padding:20px;
  font-size:22px;
  background:#083c2a;
  color:gold;
}
button{
  padding:12px 20px;
  margin:10px;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}
.play{background:gold;}
.stop{background:#b22222;color:white;}
.status{
  margin-top:15px;
  font-size:18px;
  color:#ffd700;
}
</style>
</head>
<body>

<header>üìñ Authentic Ruqyah Recitation</header>

<button class="play" onclick="start()">‚ñ∂ Start</button>
<button class="stop" onclick="stop()">‚èπ Stop</button>

<div class="status" id="status"></div>

<audio id="player"></audio>

<script>

const audio = document.getElementById("player");

const ruqyahSequence = [
  {name:"Surah Fatiha", type:"surah", number:1},
  {name:"Surah Ikhlas", type:"surah", number:112},
  {name:"Surah Falaq", type:"surah", number:113},
  {name:"Surah Naas", type:"surah", number:114},
  {name:"Ayat ul Kursi", type:"ayah", surah:2, ayah:255},
  {name:"Baqarah 285-286", type:"ayahRange", surah:2, start:285, end:286}
];

let index=0;
let repeat=0;
let playing=false;
let ayahList=[];
let ayahIndex=0;

function start(){
  if(playing) return;
  playing=true;
  index=0;
  repeat=0;
  playCurrent();
}

function stop(){
  audio.pause();
  audio.currentTime=0;
  playing=false;
  document.getElementById("status").innerText="‚èπ Stopped";
}

async function playCurrent(){

  if(index>=ruqyahSequence.length){
    document.getElementById("status").innerText="‚úÖ Ruqyah Completed";
    playing=false;
    return;
  }

  const item = ruqyahSequence[index];
  repeat=0;

  if(item.type==="surah"){
    audio.src=`https://cdn.islamic.network/quran/audio-surah/128/ar.alafasy/${item.number}.mp3`;
    audio.play();
    document.getElementById("status").innerText=
      item.name+" (1/3)";
  }

  else if(item.type==="ayah"){
    audio.src=`https://cdn.islamic.network/quran/audio/128/ar.alafasy/${item.surah}_${item.ayah}.mp3`;
    audio.play();
    document.getElementById("status").innerText=
      item.name+" (1/3)";
  }

  else if(item.type==="ayahRange"){
    ayahList=[];
    for(let i=item.start;i<=item.end;i++){
      ayahList.push(`https://cdn.islamic.network/quran/audio/128/ar.alafasy/${item.surah}_${i}.mp3`);
    }
    ayahIndex=0;
    playAyahRange(item.name);
  }
}

function playAyahRange(name){
  if(ayahIndex<ayahList.length){
    audio.src=ayahList[ayahIndex];
    audio.play();
    document.getElementById("status").innerText=
      name+" (Ayah "+(ayahIndex+1)+") ("+(repeat+1)+"/3)";
  }
}

audio.onended=function(){

  if(!playing) return;

  const item = ruqyahSequence[index];

  if(item.type==="ayahRange"){
    ayahIndex++;
    if(ayahIndex<ayahList.length){
      playAyahRange(item.name);
      return;
    }
  }

  repeat++;

  if(repeat<3){
    if(item.type==="ayahRange"){
      ayahIndex=0;
      playAyahRange(item.name);
    }else{
      audio.play();
      document.getElementById("status").innerText=
        item.name+" ("+(repeat+1)+"/3)";
    }
  }else{
    repeat=0;
    index++;
    playCurrent();
  }
};

</script>

</body>
</html>
